{"ast":null,"code":"import _regeneratorRuntime from\"/home/niels/src/js/react/inputter/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/niels/src/js/react/inputter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/niels/src/js/react/inputter/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useEffect,useState}from'react';import axios from'axios';import{ScaleLoader}from'react-spinners';import{useHistory}from'react-router-dom';import{Tooltip}from'@material-ui/core';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Details=function Details(props){var _data$message,_data$message2;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),messageObj=_useState6[0],setMessageObj=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _props$match$params=props.match.params,topic=_props$match$params.topic,offset=_props$match$params.offset;var history=useHistory();useEffect(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return axios.post('https://offset.fhirstation.net/api/v1/kafka/',{topic:topic,offset:offset},{// mode: 'no-cors'\n}).then(function(res){setData(res.data);setMessage(JSON.stringify(res.data.message));setMessageObj(JSON.parse(res.data.message.value));setLoading(false);});case 4:_context.next=10;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.warn(_context.t0.message);setLoading(false);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Tooltip,{title:\"go back\",arrow:true,children:/*#__PURE__*/_jsxs(\"h3\",{style:{flex:1,justifyContent:'center',cursor:'pointer'},onClick:function onClick(_){return history.goBack();},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u21A4\"}),\" \\xA0 \",topic,\" / \",offset]})}),loading?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ScaleLoader,{color:\"orange\"}),/*#__PURE__*/_jsx(\"p\",{children:\"please wait, loading from kafka...\"})]}):/*#__PURE__*/_jsxs(\"table\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:'1px solid #999'},children:\"key\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:'1px solid #999'},children:\"partition\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:'1px solid #999'},children:\"offset\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:'1px solid #999'},children:\"highWatermark\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:data===null||data===void 0?void 0:(_data$message=data.message)===null||_data$message===void 0?void 0:_data$message.key}),/*#__PURE__*/_jsx(\"td\",{children:data.partition}),/*#__PURE__*/_jsx(\"td\",{children:data===null||data===void 0?void 0:(_data$message2=data.message)===null||_data$message2===void 0?void 0:_data$message2.offset}),/*#__PURE__*/_jsx(\"td\",{children:data.highWatermark})]})})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:loading||/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:'1px solid #999'},children:\"raw message\"})})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"pre\",{style:pre,children:JSON.stringify(messageObj,null,2)})})})})]})})})]})})});};var pre={padding:'10px',textAlign:'left',fontSize:'13px',fontWeight:'bold',background:'#eee',borderRadius:'5px'};export default Details;","map":{"version":3,"sources":["/home/niels/src/js/react/inputter/src/pages/Details.js"],"names":["React","useEffect","useState","axios","ScaleLoader","useHistory","Tooltip","Details","props","data","setData","message","setMessage","messageObj","setMessageObj","loading","setLoading","match","params","topic","offset","history","_","post","then","res","JSON","stringify","parse","value","console","warn","display","justifyContent","alignItems","flexDirection","flex","cursor","goBack","borderBottom","key","partition","highWatermark","pre","padding","textAlign","fontSize","fontWeight","background","borderRadius"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { ScaleLoader } from 'react-spinners'\nimport { useHistory } from 'react-router-dom'\nimport { Tooltip } from '@material-ui/core'\n\nconst Details = props => {\n\n  const [ data, setData ] = useState({})\n  const [ message, setMessage ] = useState('')\n  const [ messageObj, setMessageObj ] = useState({})\n  const [ loading, setLoading ] = useState(false)\n  const { topic, offset } = props.match.params\n  const history = useHistory()\n\n  useEffect(async _ => {\n    try {\n      setLoading(true)\n      await axios.post('https://offset.fhirstation.net/api/v1/kafka/', {\n        topic, offset\n      }, {\n        // mode: 'no-cors'\n      })\n      .then(res => {\n        setData(res.data)\n        setMessage(JSON.stringify(res.data.message))\n        setMessageObj(JSON.parse(res.data.message.value))\n        setLoading(false)\n      })\n    } catch(err) {\n      console.warn(err.message)\n      setLoading(false)\n    }\n  }, [])\n\n  return (\n    <div style={{display: 'flex', justifyContent: 'center'}}>\n      <div style={{display: 'flex', alignItems: 'center'}}>\n        <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n          <Tooltip title='go back' arrow>\n            <h3 style={{ flex: 1, justifyContent: 'center', cursor: 'pointer' }} onClick={_ => history.goBack()}><span>â†¤</span> &nbsp; {topic} / {offset}</h3>\n          </Tooltip>\n          {loading ? <div><ScaleLoader color='orange'/><p>please wait, loading from kafka...</p></div> :\n          <table style={{ flex: 1 }}>\n            <thead>\n              <tr>\n                <th style={{borderBottom: '1px solid #999' }}>key</th>\n                <th style={{borderBottom: '1px solid #999' }}>partition</th>\n                <th style={{borderBottom: '1px solid #999' }}>offset</th>\n                <th style={{borderBottom: '1px solid #999' }}>highWatermark</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>{data?.message?.key}</td>\n                <td>{data.partition}</td>\n                <td>{data?.message?.offset}</td>\n                <td>{data.highWatermark}</td>\n              </tr>\n            </tbody>\n          </table>}\n          <div style={{ flex: 1 }}>\n            {loading || \n              <div>\n                <table>\n                  <thead>\n                    <tr>\n                      <th style={{borderBottom: '1px solid #999' }}>raw message</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <td>\n                      <pre style={pre}>\n                        {JSON.stringify(messageObj, null, 2)}\n                      </pre>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst pre = {\n  padding: '10px',\n  textAlign: 'left',\n  fontSize: '13px',\n  fontWeight: 'bold',\n  background: '#eee',\n  borderRadius: '5px'\n}\n\nexport default Details\n"]},"metadata":{},"sourceType":"module"}